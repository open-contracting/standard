{
    "id": "https://raw.githubusercontent.com/open-contracting/standard/master/standard/schema/release-schema.json",
    "$schema": "http://json-schema.org/draft-04/schema#",
    "description": "Schema for an Open Contracting Release",
    "type": "object",
    "properties": {
        "ocid": {
            "title": "Open Contracting ID",
            "description": "A unique identifier that identifies the unique Open Contracting Process. For more information see: http://ocds.open-contracting.org/standard/r/0__2__0/#defining-a-unique-contracting-process",
            "type": "string"
        },
        "releaseID": {
            "title": "Release ID",
            "description": "A unique identifier that identifies this release. A releaseID must be unique within a release-package and must not containt # or / characters.",
            "type": "string"
        },
        "releaseTag": {
            "title": "Release Tag",
            "description": "A tag that helps to identify the type of data in the dataset. These may be used for advanced validation.",
            "type": "string",
            "enum": ["planning", "tenderNotice", "awardNotice", "contractSignature", "contractAmendment", "report", "spending", "terminationNotice"]
        },
        "language": {
            "title": "Release language",
            "description": "Specifies the default language of the data, in ISO 639-1 codes see: https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes.",
            "type": "string",
            "default": "en"
        },
        "buyer": { 
            "description": "The buyer is the entity whose budget will be used to purchase the goods. This may be different from the procuring agency who may be specified in the formation data.",
            "$ref": "#/definitions/organization" 
        },
        "planning": { "$ref": "#/definitions/planning" },
        "formation": {
            "type": "object",
            "oneOf": [{ "$ref": "#/definitions/tender" }]
        },
        "awards": { 
            "type": "array",
            "items": { "$ref": "#/definitions/award" },
            "uniqueItems": true
        },
        "contracts": { 
            "type": "array",
            "items": {"$ref": "#/definitions/contract" },
            "uniqueItems": true
        },
        "performance": { "$ref": "#/definitions/performance" }
    },
    "required": ["ocid", "releaseID"],
    "definitions": {
        "identifier": {
            "type": "object",
            "properties": {
                "name": {
                    "type": "string"
                },
                "scheme": {
                    "description": "The scheme that holds the unique identifiers used to identify the item being identified.",
                    "type": "string",
                    "format": "uri"
                },
                "uid": {
                    "description": "The unique ID for this entity under the given ID scheme.",
                    "type": "string"
                },
                "uri": {
                    "type": "string",
                    "format" : "uri"
                }
            },
            "patternProperties": {
                "^(name_[A-Za-z]{2})$": {
                    "type": "string"
                }
            },
            "required": ["name"]
        },
        "address": {
            "description": "An Address following the convention of http://microformats.org/wiki/hcard (from http://json-schema.org/address)",
            "type": "object",
            "properties": {
                "post-office-box": { "type": "string" },
                "extended-address": { "type": "string" },
                "street-address": { "type": "string" },
                "locality":{ "type": "string" },
                "region": { "type": "string" },
                "postal-code": { "type": "string" },
                "country-name": { "type": "string"}
            },
            "patternProperties": {
                "^(country-name_[A-Za-z]{2})$": {
                    "type": "string"
                }
            },
            "required": ["locality", "region", "country-name"],
            "dependencies": {
                "post-office-box": ["street-address"],
                "extended-address": ["street-address"]
            }
        },
        "organization": {
            "title": "Organization",
            "description": "An organization.",
            "type": "object",
            "properties": {
                "id": { "$ref": "#/definitions/identifier" },
                "address": { "$ref": "#/definitions/address" }
            }
        },
        "supplier": {
            "description": "The buyer is the entity whose budget will be used to purchase the goods.",
            "type": "object",
            "$ref": "#/definitions/organization"
        },
        "item": {
            "type": "object",
            "description": "A good, service, or work to be contracted.",
            "properties": {
                "description": {
                    "description": "A description of the goods, services to be provided.",
                    "type": "string"
                },
                "classificationScheme": {
                    "description": "The classification scheme for the goods",
                    "type": "string",
                    "enum": ["CPV", "GSIN", "UNSPSC", "Other"]
                },
                "otherClassificationScheme": {
                    "description": "If the classification schema was not in list, please specify",
                    "type": "string"
                },
                "classificationID": {
                    "description": "The classification ID from the Scheme used",
                    "type": "string"
                },
                "classificationDescription": {
                    "description": "A description of the goods, services to be provided.",
                    "type": "string"
                },
                "unitOfMeasure": {
                    "description": "Description of the unit which the good comes in e.g. hours, kilograms",
                    "type": "string"
                },
                "quantity": {
                    "description": "The number of units required",
                    "type": "integer"
                },
                "valuePerUnit": { 
                    "description": "The value per unit of the item specified.",
                    "$ref": "#/definitions/value" 
                }
            },
            "patternProperties": {
                "^(description_[A-Za-z]{2})$": {
                    "type": "string"
                },
                "^(classificationDescription_[A-Za-z]{2})$": {
                    "type": "string"
                }
            }
        },
        "milestone": {
            "type": "object",
            "properties": {
                "description": {
                    "description": "A description of the milestone.",
                    "type": "string"
                },
                "date": {
                    "description": "The date the milestone is either due or completed (as specified by dateType).",
                    "type": "string",
                    "format": "date-time"
                },
                "dateType": {
                    "description": "Specify whether the date field is referring to a due date or a completed date.",
                    "type": "string",
                    "enum": ["due", "completed"]
                },
                "attachments": {
                    "description": "List of documents associated with this milestone.",
                    "type": "array",
                    "items": { "$ref": "#/definitions/attachment" }
                }
            },
            "patternProperties": {
                "^(description_[A-Za-z]{2})$": {
                    "type": "string"
                }
            }
        },
        "performance": {
            "type": "object",
            "properties": {
                "transactions": {
                    "description": "A list of the spending transactions made against this contract",
                    "type": "array",
                    "items": {
                        "type": "object",
                        "properties": {
                            "transactionDataPackageURI": {
                                "description": "The link to the budget data package (called a budget data package, but includes budget and spending data), as defined by http://github.com/openspending/budget-data-package",
                                "type": "string",
                                "format": "uri"
                            },
                            "transactionID": {
                                "description": "The ID of the item in the budget data package, which this procurement is associated with. https://github.com/openspending/budget-data-package/blob/master/specification.md#required-fields-all-categories",
                                "type": "string"
                            },
                            "transactionAmount": {
                                "description": "The amount of the transaction as described in the budget data package (https://github.com/openspending/budget-data-package/blob/master/specification.md#required-fields-all-categories). This provides some redundancy, but does not give full context such as the currency, date of transaction etc. which should be retrieved from the budget data pacakge.",
                                "type": "number"
                            }
                        },
                        "required": ["transactionDataPackageURI", "transactionID"]
                    }
                },
                "milestones": {
                    "description": "As milestones are completed, milestone completions should be documented.",
                    "type": "array",
                    "items": { "$ref": "#/definitions/milestone" }
                },
                "reports":{
                    "description": "Any additional reports that are part of the performance phase e.g. audit and evaluation reports.",
                    "type": "array",
                    "items": { "$ref": "#/definitions/attachment"}
                }
            }
        },
        "planning": {
            "description": "Information from the planning phase of the contracting process. Note that many other fields may be filled in a planning release, in the appropriate fields in other schema sections, these would likely be estimates at this stage e.g. totalValue in tender",
            "type": "object",
            "properties": {
                "budgetDataPackageURI": {
                    "description": "The link to the budget data package, as defined by http://github.com/openspending/budget-data-package",
                    "type": "string",
                    "format": "uri"
                },
                "budgetID": {
                    "description": "The ID of the item in the budget data package, which this procurement is associated with. https://github.com/openspending/budget-data-package/blob/master/specification.md#required-fields-all-categories",
                    "type": "string"
                },
                "budgetAmount": {
                    "description": "The amount of the item in the budget data package, which this procurement is associated with. https://github.com/openspending/budget-data-package/blob/master/specification.md#required-fields-all-categories. This provides some redundancy, but does not give full context such as the currency, date of transaction etc. which should be retrieved from the budget data pacakge.",
                    "type": "number"
                },
                "publicHearingNotices": {
                    "description": "A list of notices of any public hearings on this contract",
                    "type": "array",
                    "items": { "$ref": "#/definitions/notice" },
                    "uniqueItems": true
                },
                "strategicJustificiation": {
                    "description": "A description of the rationale for this procurement",
                    "type": "string"
                },
                "anticipatedMilestones": {
                    "description": "A list of anticipated milestones for the contract.",
                    "type": "array",
                    "items": { "$ref": "#/definitions/milestone" }
                }
            },
            "patternProperties": {
                "^(strategicJustificiation_[A-Za-z]{2})$": {
                    "type": "string"
                }
            },
            
            "dependencies": {
                "budgetID": ["budgetDataPackageURI"],
                "budgetAmount": ["budgetDataPackageURI"]
            }
        },
        "tender": {
            "type": "object",
            "required": ["tenderID"],
            "properties": {
                "tenderID": {
                    "title": "Tender ID",
                    "description": "TenderID should always be the same as the OCID. It is included to make the flattened data structure more convenient.",
                    "type": "string"
                },
                "notice": { "$ref": "#/definitions/notice" },
                "itemsToBeProcured": {
                    "description": "The goods and services to be purchased, broken into line items wherever possible. Items should not be duplicated, but a quantity of 2 specified instead.",
                    "type": "array",
                    "minItems": 1,
                    "items": { "$ref": "#/definitions/item" },
                    "uniqueItems": true
                },
                "totalValue": {
                    "description": "The total estimated value of the procurement.",
                    "$ref": "#/definitions/value"
                },
                "method": {
                    "description": "Specify tendering method as per GPA definitions of Open, Selective, Limited (http://www.wto.org/english/docs_e/legal_e/rev-gpr-94_01_e.htm)",
                    "type": "string",
                    "enum": ["Open", "Selective", "Limited"]
                },
                "methodJustification": {
                    "description": "Justification of procurement method, especially in the case of Limited tendering.",
                    "type": "string"
                },
                "selectionCriteria": {
                    "description": "Specify the selection criteria, by lowest cost, ",
                    "type": "string",
                    "enum": ["Lowest Cost", "Best Proposal", "Best Value to Government", "Single bid only"]
                },
                "selectionDetails": {
                    "description": "Any detailed or further information on the selection criteria.",
                    "type": "string"
                },
                "submissionMethod": {
                    "description": "Specify the method by which bids must be submitted, in person, written, or electronic auction",
                    "type": "string",
                    "enum": ["Electronic Auction", "Electronic Submission", "Written", "In Person"]
                },
                "submissionDetails" : {
                    "description": "Any detailed or further information on the submission method.",
                    "type": "string"
                },
                "tenderPeriod": {
                    "description": "The period when the tender is open for submissions. The end date is the closing date for tender submissions.",
                    "$ref": "#/definitions/period"
                },
                "clarificationPeriod": {
                    "description": "The period during which clarification requests may be made and will be answered.",
                    "$ref": "#/definitions/period"
                },
                "clarifications": {
                    "description": "A Yes/No field as to whether clarifications were issued. Would expect clarifications to appear as amendments.",
                    "type": "boolean"
                },
                "awardPeriod": {
                    "description": "The date or period on which an award is anticipated to be made.",
                    "$ref": "#/definitions/period"
                },
                "numberOfBidders": {
                    "description": "The number of unique bidders who participated in the tender",
                    "type": "integer"
                },
                "numberOfBids": {
                    "description": "The number of bids or submissions to the tender. In the case of an auction, the number of bids may differ from the numberOfBidders.",
                    "type": "integer"
                },
                "bidders": {
                    "description": "A list of all the companies who entered submissions for the tender.",
                    "type": "array",
                    "items": { "$ref": "#/definitions/supplier" },
                    "uniqueItems": true
                },
                "procuringEntity": { 
                    "description": "The entity managing the procurement, which may be different from the buyer who is paying / using the items being procured.",
                    "$ref": "#/definitions/organization" 
                },
                "attachments": {
                    "description": "All documents and attachments related to the tender.",
                    "type": "array",
                    "items": { "$ref": "#/definitions/attachment" },
                    "uniqueItems": true
                }
            },
            "patternProperties": {
                "^(methodJustification_[A-Za-z]{2})$": {
                    "type": "string"
                },
                "^(selectionMethod_[A-Za-z]{2})$": {
                    "type": "string"
                },
                "^(submissionDetails_[A-Za-z]{2})$": {
                    "type": "string"
                }

            }
        },
        "award": {
            "description": "An award for the given procurement. There may be more than one award per contracting process e.g. because the contract is split amongst different providers, or because it is a standing offer.",
            "type": "object",
            "required": ["awardID"],
            "properties": {
                "awardID": { 
                    "title": "Award ID",
                    "description": "The identifier for this award. It must be unique within its Open Contracting Process (defined by a single ocid), it need not be unique in the package. e.g. ocid ABC can have awardID 1 & awardID 2 and ocid DEF can also have awardID 1 & 2. But if it is a different award, ocid cannot have awardID 1 and 1 otherwise that will cause the data to be overridden when the record is compiled.", 
                    "type": "string"
                },
                "notice": { "$ref": "#/definitions/notice" },
                "awardDate": {
                    "title": "Award date",
                    "description": "The date of the contract award.",
                    "type": "string",
                    "format": "date-time"
                },
                "awardValue": {
                    "description": "The total value of this award. There may be more than one award per procurement.",
                    "$ref": "#/definitions/value"
                },
                "suppliers": {
                    "description": "The suppliers awarded this award.",
                    "type": "array",
                    "items": { "$ref": "#/definitions/supplier" },
                    "uniqueItems": true
                },
                "itemsAwarded": {
                    "description": "The goods and services awarded in this award, broken into line items wherever possible. Items should not be duplicated, but a quantity of 2 specified instead.",
                    "type": "array",
                    "minItems": 1,
                    "items": { "$ref": "#/definitions/item" },
                    "uniqueItems": true
                }
            } 
        },
        "contract": {
            "type": "object",
            "required": ["contractID"],
            "properties": {
                "contractID": { 
                    "title": "Contract ID",
                    "description": "The identifier for this contract. It must be unique within its Open Contracting Process (defined by a single ocid), it need not be unique in the package. e.g. ocid ABC can have contractID 1 & contractID 2 and ocid DEF can also have contractID 1 & 2. But if it is a different contract, ocid cannot have contractID 1 and 1 otherwise that will cause the data to be overridden when the record is compiled.", 
                    "type": "string"
                },
                "awardID": {
                    "title": "Award ID",
                    "description": "The awardID against which this contract is being issued.",
                    "type": "string"
                },
                "contractPeriod": {
                    "description": "The start and end date for the contract.",
                    "$ref": "#/definitions/period"
                },
                "contractValue": {
                    "description": "The total value of this contract.",
                    "$ref": "#/definitions/value"
                },
                "isAmendment": {
                    "title": "Is this an amendment to the contract?",
                    "description": "If true, then amendment information should be provided.",
                    "type": "boolean"
                },
                "amendment": { "$ref": "#/definitions/amendment" },
                "itemsContracted": {
                    "description": "(Optional) The goods and services in this contract. If the items are the same as the award do not repeat.",
                    "type": "array",
                    "minItems": 1,
                    "items": { "$ref": "#/definitions/item" },
                    "uniqueItems": true
                },
                "deliverables": {
                    "description": "Deliverables or milestones included in the contract.",
                    "type": "array",
                    "minItems": 1,
                    "items": { "$ref": "#/definitions/deliverable" },
                    "uniqueItems": true
                },
                "signatureDate": {
                    "description": "The date the contract was signed. In the case of multiple signatures, the date of the last signature.",
                    "type": "string",
                    "format": "date-time"
                },
                "attachments": {
                    "description": "All documents and attachments related to the contract.",
                    "type": "array",
                    "items": { "$ref": "#/definitions/attachment" },
                    "uniqueItems": true
                }
            }
        },
        "notice": {
            "type": "object",
            "properties": {
                "id": {
                    "title": "Notice identifier",
                    "description": "The identifier that identifies the notice to the publisher. This may be the same or different from the OCID.",
                    "format": "string"
                },
                "uri": {
                    "title": "Notice URI",
                    "description": "A permanent uri that provides access to the notice.",
                    "format": "uri"
                },
                "publishedDate": {
                    "title": "Notice published date",
                    "description": "The date this version of the notice was published. In the case of notice amendments, it is the date that reflects to this version of the data.",
                    "format": "date-time"
                },
                "isAmendment": {
                    "title": "Is this an amendment to the notice?",
                    "description": "If true, then amendment information should be provided.",
                    "type": "boolean"
                },
                "amendment": { "$ref": "#/definitions/amendment" }
            }
        },
        "amendment": {
            "type": "object",
            "title": "Amendment information",
            "properties": {
                "amendmentDate": {
                    "type": "string",
                    "format": "date-time"
                },
                "amendedFields": {
                    "description": "Comma-seperated list of affected fields.",
                    "type": "string"
                },
                "justification": {
                    "description": "An explanation / justification for the amendment.",
                    "type": "string"
                }
            }
        },
        "period": {
            "type": "object",
            "title": "Period",
            "properties": {
                "startDate": {
                    "type": "string",
                    "format": "date-time"
                },
                "endDate": {
                    "type": "string",
                    "format": "date-time"
                }
            }
        },
        "attachment": {
            "type": "object",
            "title": "Attachment",
            "properties": {
                "description": {
                    "description": "A description of the document",
                    "type": "string"
                },
                "uri": {
                    "description": "Link to the document or attachment.",
                    "type": "string",
                    "format": "uri"
                },
                "lastModified": {
                    "description": "Date that the document was last modified",
                    "type": "string",
                    "format": "date-time"
                }
            },
            "patternProperties": {
                "^(description_[A-Za-z]{2})$": {
                    "type": "string"
                }
            }
        },
        "value": {
            "type": "object",
            "properties": {
                "amount": {
                    "description": "Amount as a number.",
                    "type": "number",
                    "minimum": 0
                },
                "currency": {
                    "description": "The currency in 3-letter ISO 4217 format.",
                    "type": "string",
                    "minLength": 3,
                    "maxLength": 3
                }
            }
        },
        "deliverable": {
            "type": "object",
            "title": "Deliverable",
            "properties": {
                "description": {
                    "description": "A description of the deliverable",
                    "type": "string"
                },
                "dueDate": {
                    "description": "Date deliverable is due",
                    "type": "string",
                    "format": "date-time"
                },
                "attachment": {
                    "description": "Attachment describing deliverable",
                    "$ref": "#/definitions/attachment"
                }
            },
            "patternProperties": {
                "^(description_[A-Za-z]{2})$": {
                    "type": "string"
                }
            }
        }
    }
}
