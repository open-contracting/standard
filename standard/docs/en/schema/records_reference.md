# Record Reference

Whereas there can be multiple releases concerning a given contracting process, there should be a single **contracting record** for each ocid, providing a summary of all the available data about this particular contracting process.

A record **must** contain:

* An [ocid](../../identifiers/#ocid)
* An array of **[releases](#release)** related to this contracting process - either by providing a URL for where these releases can be found, or embedding a full copy of the release

This allows the record to function as an index of all the releases related to a given contracting process.

Records **should** contain:

* **compiledRelease** - the latest version of all open contracting process fields, represented using the release schema.

Records **may** optionally contain:

* **versionedRelease** - containing the history of the data in the compiledRecord, with all known past values of any field and the release that information came from.

The versioned release format is designed to support analysis of how data has changed between releases, and will often be generated by data users, rather than by publishers.

## Package metadata

Records should be embedded within a record package.

```eval_rst

.. jsonschema:: ../../../../build/current_lang/record-package-schema.json
    :include:
    :collapse: records

```

See the guidance on [package metadata](reference.md#package-metadata). In addition, a record package includes:

* ```packages``` - which should provide links to all the release packages used to compile this record.
* ```records``` - one or more contracting process records, containing, at the very least, identifiers for the all the releases that relate to each contracting process.

You can see this in the full example of a record below.

```eval_rst

.. jsoninclude:: docs/en/examples/merging/versioned.json
   :jsonpointer:
   :expand: packages, records
   :title: Full_record

```

## Record structure

Each record package contains an array of one or more records, consisting of the following sections:

* Releases (required)
* Compiled Release (optional)
* Versioning Release (optional)

### Release list

The releases that make up a contracting process can be provided in two ways:

* URLs and metadata for each release; or
* Embedded copies of the release;

If providing an array of URLs, it should be possible for a consuming application to look up each URL, retrieve a release package, and locate the release inside it. In order to locate the specific release inside a release package the releaseID of the release should be appended to the package URL using a fragment identifier.

An example releases section is given below.

```eval_rst

.. jsoninclude:: docs/en/examples/merging/versioned.json
   :jsonpointer: /records/0
   :expand: releases, tag
   :title: releases

```

### Compiled Release

The compiled release is the latest version of all the data about this contracting process, and has the same schema as a release.

The process for creating a compiled release is described in the guidance on [merging](merging.md).

A compiled release provides a snapshot of the current state of a contracting process, and the contents should follow the release schema.

### Versioned Release

A versioned release contains the history of all the data in the compiled release, including which fields have changed, when they were changed, and the release which updated them.

This versioned information is valuable for many use cases relating to contract monitoring. However, it can add substantially to file sizes, and so where publishers do generate this at source, they should consider publishing versioned and non-versioned copies of the records.

Third parties should also be able to use the information in the releases list to fetch source data, compile and verify their own version history for a contract.

An example extract of the versioned information for a tender value is shown below. This makes visible the change in contract value from the planning to the tender stage, whilst currency, which was first encountered in the planning stage stayed unchanged.

```eval_rst

.. jsoninclude:: docs/en/examples/merging/versioned.json
   :jsonpointer: /records/0/versionedRelease/tender/value
   :expand: amount, releaseTag
   :title: versioned

```
